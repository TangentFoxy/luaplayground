--function
--save

-- saves all data in a format main.lua can load from, if there is a supported save type
--  does not overwrite unloaded files, lists unsaved data in _UNSAVED
local file = 1
for i, t in ipairs(_G) do
  while _UNLOADED[file] do
    file = file + 1
  end
  local fn = _G[t.type.."_save"]
  local success
  if fn then
    success = fn(t, file)
  end
  if success then
    file = file + 1
  else
    print("Unable to save type \""..t.type.."\"")
    if not _UNSAVED then _UNSAVED = {} end
    _UNSAVED[i] = true
  end
end
